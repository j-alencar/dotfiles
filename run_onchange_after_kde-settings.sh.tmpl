#!/bin/bash
# hash: {{ include "dot_config/kwinrc" | sha256sum }}
# hash: {{ include "dot_config/kdeglobals" | sha256sum }}
# hash: {{ include "dot_config/kglobalshortcutsrc" | sha256sum }}
# hash: {{ include "dot_config/khotkeysrc" | sha256sum }}

{{ if ne .chezmoi.os "linux" }}
exit 0
{{ end }}

set -euo pipefail

IS_WSL=false
[[ -f /proc/version ]] && grep -qi microsoft /proc/version && IS_WSL=true

if [[ "$IS_WSL" == "true" ]]; then
    exit 0
fi

if command -v qdbus &>/dev/null && qdbus org.kde.KWin /KWin 2>/dev/null; then
    qdbus org.kde.KWin /KWin reconfigure 2>/dev/null || true
fi
